<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PREPARICFES - Resultados</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', path='css/resultados.css')}}">
</head>

<body>

  <div class="content_barra">
    <ul class="nav justify-content-end">
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('intro')}}{% if user_id %}?user_id={{ user_id }}&grado={{ grado }}{% endif %}">Introducción</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('criterio')}}{% if user_id %}?user_id={{ user_id }}&grado={{ grado }}{% endif %}">Criterios</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('competencias')}}{% if user_id %}?user_id={{ user_id }}&grado={{ grado }}{% endif %}">Competencias</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="#">Resultados</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('usuario')}}{% if user_id %}?user_id={{ user_id }}&grado={{ grado }}{% endif %}">Usuario</a>
      </li>
    </ul>
  </div>

  <div class="container my-5">
    <h1 class="text-center">📊 Mis Resultados</h1>

    {% if resultados %}
    
    <!-- Tabla de Resultados -->
    <div class="table-responsive my-4">
      <table class="table table-bordered text-center align-middle">
        <thead class="table-dark">
          <tr>
            <th>Materia</th>
            <th>Puntaje</th>
            <th>Desempeño</th>
          </tr>
        </thead>
        <tbody>
          {% for resultado in resultados %}
          <tr>
            <td><strong>{{ resultado.materia }}</strong></td>
            <td><h4 style="margin: 0; color: #333;">{{ resultado.puntaje }}%</h4></td>
            <td>
              {% if resultado.desempeno == 'Superior' %}
              <span class="badge bg-success">{{ resultado.desempeno }}</span>
              {% elif resultado.desempeno == 'Alto' %}
              <span class="badge bg-info">{{ resultado.desempeno }}</span>
              {% elif resultado.desempeno == 'Medio' %}
              <span class="badge bg-warning text-dark">{{ resultado.desempeno }}</span>
              {% else %}
              <span class="badge bg-danger">{{ resultado.desempeno }}</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
          <tr style="background-color: #f4eacb; font-weight: bold;">
            <td>PROMEDIO GENERAL</td>
            <td colspan="2"><h3 style="margin: 0;">{{ promedio }}%</h3></td>
          </tr>
        </tbody>
      </table>
    </div>

    {% else %}
    
    <div class="alert alert-info text-center my-5" role="alert">
      <h3>📝 Aún no has completado ninguna prueba</h3>
      <p>Comienza a practicar para ver tus resultados aquí</p>
    </div>

    {% endif %}

    <!-- Botones -->
    <div class="text-center mt-4">
      <a href="{{ url_for('competencias')}}{% if user_id %}?user_id={{ user_id }}&grado={{ grado }}{% endif %}">
        <button class="boton_siguiente">📚 Volver a Competencias</button>
      </a>
      <a href="{{ url_for('index')}}">
        <button class="boton_siguiente" style="margin-left: 10px;">🏠 Cerrar Sesión</button>
      </a>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>